from flask import Flask, render_template, jsonify
from geojson import Point, Feature

app = Flask(__name__)

# Use http://share.mapbbcode.org with export geojson to generate debug track

app.debug = True

@app.route("/")
def index():
    return render_template('map.html')

index = 0
@app.route("/getPos")
def getPos():
	global index
	track = [[-1.62733,48.12875],[-1.62726,48.12875],[-1.62718,48.12875],[-1.62711,48.12875],[-1.62703,48.12876],[-1.62697,48.12875],[-1.62691,48.12876],[-1.62686,48.12878],[-1.62687,48.12881],[-1.62688,48.12886],[-1.62688,48.1289],[-1.6269,48.12897],[-1.62692,48.12901],[-1.62693,48.12904],[-1.62693,48.12908],[-1.62689,48.12911],[-1.62682,48.12912],[-1.62675,48.12912],[-1.62667,48.12913],[-1.62658,48.12913],[-1.62653,48.12917],[-1.62652,48.1292],[-1.62652,48.12925],[-1.62653,48.12932],[-1.62655,48.12935],[-1.62657,48.12939],[-1.62663,48.12939],[-1.6267,48.12937],[-1.62681,48.12937],[-1.62689,48.12936],[-1.627,48.12934],[-1.62708,48.12933],[-1.62719,48.12932],[-1.62731,48.12931],[-1.62741,48.12929],[-1.62752,48.12928],[-1.62762,48.12927],[-1.62771,48.12926],[-1.62784,48.12924],[-1.62793,48.12923],[-1.62796,48.12918],[-1.62796,48.12909],[-1.62803,48.12904],[-1.62808,48.12899],[-1.62816,48.12897],[-1.62824,48.12892],[-1.62831,48.12889],[-1.62839,48.12886],[-1.62847,48.12881],[-1.62854,48.12878],[-1.6286,48.12875],[-1.62866,48.12872],[-1.62871,48.12868],[-1.62874,48.12864],[-1.62879,48.12859],[-1.62891,48.12854],[-1.629,48.12851],[-1.62909,48.12847],[-1.6292,48.12844],[-1.62929,48.1284],[-1.6294,48.12837],[-1.62947,48.12834],[-1.62952,48.1284],[-1.62957,48.12845],[-1.6296,48.12852],[-1.62965,48.1286],[-1.62972,48.12868],[-1.62976,48.12875],[-1.62981,48.12883],[-1.62988,48.12888],[-1.62991,48.12896],[-1.62996,48.12902],[-1.63004,48.12909],[-1.63012,48.12917],[-1.63016,48.12925],[-1.63024,48.1293],[-1.63029,48.12939],[-1.63038,48.12946],[-1.63046,48.12955],[-1.63053,48.12959],[-1.63057,48.12964],[-1.63064,48.12969],[-1.63054,48.12973],[-1.63043,48.12975],[-1.63033,48.12975],[-1.63019,48.12979],[-1.63004,48.1298],[-1.62995,48.12982],[-1.62981,48.12983],[-1.6297,48.12984],[-1.62957,48.12987],[-1.62945,48.12989],[-1.6293,48.12991],[-1.62917,48.12995],[-1.62898,48.12997],[-1.62878,48.12999],[-1.62861,48.12999],[-1.62845,48.13],[-1.62832,48.13003],[-1.62814,48.13006],[-1.62793,48.1301],[-1.62776,48.13014],[-1.62763,48.13019],[-1.62745,48.1302],[-1.62726,48.13024],[-1.62706,48.13027],[-1.62695,48.1303],[-1.62666,48.13039],[-1.62639,48.1305],[-1.6262,48.13054],[-1.62605,48.13059]]
	index = index +1
	if index >= len(track):
		index = 0
	p = Feature(geometry=Point((track[index][0],track[index][1])), id=index)
	return str(p)

if __name__ == "__main__":
	app.run()